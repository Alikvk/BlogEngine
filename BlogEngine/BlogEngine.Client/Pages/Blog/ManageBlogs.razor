@page "/blog/manage"
@layout NavigationLayout
@inject IBlogClient BlogClient

<TextCenter Text="Manage Blogs" />

<BlogsDataGrid BlogDTOs="_blogDTOs" BlogDelete="OnBlogDelete" />

@code {
    private List<BlogDTO> _blogDTOs = null;

    protected async override Task OnInitializedAsync()
    {
        await LoadPage();
    }

    private async Task OnBlogDelete(int id)
    {
        await BlogClient.DeleteAsync(id);
        await LoadPage();
    }

    private async Task LoadPage()
    {
        _blogDTOs = await BlogClient.GetAllAsync();
    }
}